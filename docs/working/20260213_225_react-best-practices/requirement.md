# 要件定義

**Issue**: #225
**作成日**: 2026-02-13
**ラベル**: performance

## ユーザーストーリー
開発者「React/Next.jsのベストプラクティスに準拠して、パフォーマンスとコード品質を改善したい」
アプリ「バンドルサイズ削減、ステール値リスク解消、デッドコード除去、localStorage堅牢化が実現される」

## 要件一覧

### 必須要件
- [ ] Lottieコンポーネントを`next/dynamic`で遅延読み込み（バンドルサイズ削減）
- [ ] 10箇所のsetStateをfunctional updateパターンに修正（ステール値リスク解消）
- [ ] 空のuseEffectを削除（デッドコード除去）
- [ ] タイマー系localStorageにスキーマバージョニング追加

### オプション要件
- なし（全て必須）

## 受け入れ基準
- [ ] `npm run build` が成功する
- [ ] `npm run lint` がエラー・warning 0
- [ ] `npm run test` が全テスト通過
- [ ] 既存の動作に変更がない（リファクタリングのみ）
- [ ] localStorageの既存データが正しくマイグレーションされる
