# コーヒー図鑑セクション要件定義書

## 1. 概要

### 1.1 目的
ホームページに新しい「コーヒー図鑑」セクションを追加し、ユーザーがコーヒーに関する知識を学習し、楽しみながらコーヒー文化を深められる機能を提供する。

### 1.2 背景
- 現在のアプリは焙煎業務に特化しているが、コーヒー文化の学習要素が不足
- ユーザーのコーヒー知識向上とエンゲージメント向上を図る
- ゲーミフィケーション要素を活用した学習体験の提供

## 2. 機能要件

### 2.1 セクション構成
ホームページの既存セクション（業務、記録、功績と成長、サポート・設定）に加えて、第5のセクションとして「コーヒー図鑑」を追加。

**セクション情報：**
- タイトル: 「コーヒー図鑑」
- サブタイトル: 「コーヒー知識とクイズ」
- アイコン: `Icons.menu_book` または `Icons.school`
- アクセントカラー: `Color(0xFF4CAF50)` (緑系 - 学習・成長を表現)

### 2.2 機能カード一覧

#### 2.2.1 コーヒー豆図鑑
- **タイトル**: 「コーヒー豆図鑑」
- **アイコン**: `Icons.eco`
- **機能**: 
  - 世界各地のコーヒー豆の詳細情報
  - 産地、品種、特徴、風味プロファイル
  - 写真付きの豆の見た目情報
  - おすすめの焙煎度合い
- **データ構造**: 静的データ（JSON形式）

#### 2.2.2 焙煎知識
- **タイトル**: 「焙煎知識」
- **アイコン**: `Icons.local_fire_department`
- **機能**:
  - 焙煎の基本理論
  - 焙煎度合いの詳細説明
  - 温度と時間の関係
  - 豆の変化過程の可視化
- **データ構造**: 静的データ + アニメーション

#### 2.2.3 抽出方法ガイド
- **タイトル**: 「抽出方法ガイド」
- **アイコン**: `Icons.water_drop`
- **機能**:
  - ドリップ、エスプレッソ、フレンチプレス等の抽出方法
  - ステップバイステップの手順
  - コツとポイント
  - 動画コンテンツ（将来的に）
- **データ構造**: 静的データ + 画像

#### 2.2.4 コーヒー歴史
- **タイトル**: 「コーヒー歴史」
- **アイコン**: `Icons.history_edu`
- **機能**:
  - コーヒーの起源と伝播
  - 各国のコーヒー文化
  - 歴史的な出来事
  - タイムライン表示
- **データ構造**: 静的データ + タイムラインUI

#### 2.2.5 クイズゲーム
- **タイトル**: 「コーヒークイズ」
- **アイコン**: `Icons.quiz`
- **機能**:
  - 4択クイズ形式
  - 難易度別（初級・中級・上級）
  - スコア記録とランキング
  - バッジ獲得システム連携
- **データ構造**: 動的データ + ユーザー進捗管理

#### 2.2.6 用語辞典
- **タイトル**: 「用語辞典」
- **アイコン**: `Icons.book`
- **機能**:
  - コーヒー専門用語の解説
  - 検索機能
  - カテゴリ別分類
  - お気に入り機能
- **データ構造**: 静的データ + 検索機能

## 3. 技術要件

### 3.1 データ管理
- **静的データ**: JSON形式でローカル保存
- **ユーザー進捗**: Firestoreで管理
- **クイズスコア**: 既存のバッジシステムと連携

### 3.2 画面遷移
- 各機能カードから専用ページへ遷移
- ルート名: `/coffee_encyclopedia/[機能名]`

### 3.3 既存システムとの連携
- **バッジシステム**: クイズ完了時にバッジ獲得
- **テーマ設定**: 既存のテーマ設定を適用
- **グループ機能**: グループ内でのランキング表示

## 4. UI/UX要件

### 4.1 デザイン方針
- 既存のセクションと統一感のあるデザイン
- 学習要素を強調する緑系のカラーパレット
- 直感的で分かりやすいアイコンとタイトル

### 4.2 レスポンシブ対応
- モバイル版: 2列グリッドレイアウト
- WEB版: 3列グリッドレイアウト
- 既存の`HomeFeatureCard`コンポーネントを活用

### 4.3 アクセシビリティ
- 既存のテーマ設定（フォントサイズ、色設定）に対応
- スクリーンリーダー対応

## 5. 実装計画

### 5.1 Phase 1: 基本セクション追加
1. `home_body.dart`にコーヒー図鑑セクションを追加
2. 基本的な6つの機能カードを実装
3. 各機能のプレースホルダーページを作成

### 5.2 Phase 2: コンテンツ実装
1. コーヒー豆図鑑のデータとUI実装
2. 焙煎知識ページの実装
3. 抽出方法ガイドの実装

### 5.3 Phase 3: インタラクティブ機能
1. クイズゲームの実装
2. 用語辞典の検索機能
3. バッジシステムとの連携

### 5.4 Phase 4: 拡張機能
1. コーヒー歴史のタイムライン実装
2. アニメーション効果の追加
3. オフライン対応

## 6. データ構造

### 6.1 コーヒー豆データ
```json
{
  "id": "string",
  "name": "string",
  "origin": "string",
  "variety": "string",
  "altitude": "string",
  "flavor_profile": ["string"],
  "roast_level": "string",
  "description": "string",
  "image_url": "string"
}
```

### 6.2 クイズデータ
```json
{
  "id": "string",
  "question": "string",
  "options": ["string"],
  "correct_answer": "number",
  "explanation": "string",
  "difficulty": "string",
  "category": "string"
}
```

### 6.3 用語データ
```json
{
  "id": "string",
  "term": "string",
  "definition": "string",
  "category": "string",
  "related_terms": ["string"]
}
```

## 7. 成功指標

### 7.1 ユーザーエンゲージメント
- コーヒー図鑑セクションのアクセス数
- 各機能の利用頻度
- セッション時間の延長

### 7.2 学習効果
- クイズの正答率向上
- 用語辞典の検索回数
- バッジ獲得数

### 7.3 ユーザー満足度
- 機能の使いやすさ評価
- コンテンツの有用性評価
- 継続利用意向

## 8. 今後の拡張可能性

### 8.1 コンテンツ拡張
- 動画コンテンツの追加
- 音声ガイド機能
- AR機能による豆の識別

### 8.2 ソーシャル機能
- 学習進捗の共有
- クイズ結果の投稿
- コミュニティ機能

### 8.3 パーソナライゼーション
- 学習履歴に基づく推奨コンテンツ
- 個人の知識レベルに応じたクイズ出題
- カスタマイズ可能な学習プラン

---

**作成日**: 2024年12月19日  
**バージョン**: 1.0  
**作成者**: AI Assistant
