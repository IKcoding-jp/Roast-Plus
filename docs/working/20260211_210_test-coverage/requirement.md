# 要件定義

**Issue**: #210
**作成日**: 2026-02-11
**ラベル**: testing

## ユーザーストーリー
ユーザー「ビジネスロジックの重要な関数にテストがないのが不安。カバレッジを上げて品質を保証したい」
アプリ「テスト未対象の純粋関数にユニットテストを追加し、カバレッジレポートに反映する」

## 現状分析
- カバレッジレポート上: 93.98%（テスト対象ファイルのみ）
- テスト対象: 37ファイル / テスト未対象: 約148ファイル
- テスト数: 758テスト（全合格）

## 要件一覧

### 必須要件
- [ ] Tier 1（9ファイル）のユニットテスト追加
  - coffee-quiz系6ファイル: badge, daily-goal, level, stats, streak, xp
  - roastTimerUtils, tastingUtils, workProgress/helpers
- [ ] Tier 2（5ファイル）のユニットテスト追加
  - drip-guide系3ファイル: formatTime, recipeCalculator, recipe46
  - utils, firestore/common（純粋関数部分）
- [ ] 改善前後のカバレッジ比較レポート

### オプション要件
- [ ] coffee-quiz/debug.ts のテスト追加（現在67.3%→改善）

## 受け入れ基準
- [ ] 全14ファイルにテストが存在する
- [ ] 新規テストが全て合格する
- [ ] 既存テストが壊れていない
- [ ] 各ファイルのステートメントカバレッジ80%以上
- [ ] プロダクションコードに変更がない
