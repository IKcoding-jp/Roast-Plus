@import "tailwindcss";

:root {
  --background: #FDF8F0;
  --foreground: #171717;
  /* メインカラー */
  --primary: #EF8A00;
  --primary-dark: #D67A00;
  --primary-light: #FF9A1A;
  --dark: #211714;
  --dark-light: #3A2F2B;
  --gold: #FFC107;
}

/*
 * テーマシステム: セマンティックトークン
 * data-theme 属性で切り替わるCSS変数
 * 新テーマ追加時はここにブロックを追加するだけ
 */
@layer theme {
  :root {
    /* 背景 */
    --page: #F7F7F5;
    --surface: #FFFFFF;
    --overlay: #FFFFFF;
    --ground: #F5F5F5;
    --field: #FFFFFF;
    /* テキスト */
    --ink: #1f2937;
    --ink-sub: #4b5563;
    --ink-muted: #9ca3af;
    /* ボーダー */
    --edge: #e5e7eb;
    --edge-strong: #d1d5db;
    --edge-subtle: #f3f4f6;
    /* アクセント */
    --spot: #d97706;
    --spot-hover: #b45309;
    --spot-subtle: #fef3c7;
    --spot-surface: #fffbeb;
    /* ボタン */
    --btn-primary: #d97706;
    --btn-primary-hover: #b45309;
    /* ステータスカラー */
    --danger: #dc2626;
    --danger-subtle: #fee2e2;
    --success: #16a34a;
    --success-subtle: #dcfce7;
    --warning: #eab308;
    --warning-subtle: #fef9c3;
    --info: #00b8d4;
    --info-hover: #00a0b8;
    /* エラー */
    --error: #ef4444;
    --error-ring: #fee2e2;
    /* カードヘッダーグラデーション */
    --card-header-from: #211714;
    --card-header-via: #3A2F2B;
    --card-header-to: #211714;
    /* フィードバックテキスト */
    --feedback-correct: #065f46;
    --feedback-incorrect: #9f1239;
    /* シャドウ */
    --card-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
    --card-shadow-hover: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
    --card-glow: 0 10px 30px rgba(0,0,0,0.04);
    /* ヘッダー */
    --header-bg: #261a14;
    --header-text: #FFFFFF;
    --header-accent: #EF8A00;
    --header-btn-hover: rgba(255, 255, 255, 0.1);
  }

  [data-theme="christmas"] {
    /* ヘッダー */
    --header-bg: #4a0e0e;
    --header-text: #f8f1e7;
    --header-accent: #d4af37;
    --header-btn-hover: rgba(212, 175, 55, 0.2);
    /* 背景 */
    --page: #051a0e;
    --surface: #0d3520;
    --overlay: #0a2f1a;
    --ground: rgba(255, 255, 255, 0.03);
    --field: rgba(255, 255, 255, 0.08);
    /* テキスト */
    --ink: #f8f1e7;
    --ink-sub: rgba(248, 241, 231, 0.7);
    --ink-muted: rgba(248, 241, 231, 0.5);
    /* ボーダー */
    --edge: rgba(212, 175, 55, 0.2);
    --edge-strong: rgba(212, 175, 55, 0.4);
    --edge-subtle: rgba(255, 255, 255, 0.12);
    /* アクセント */
    --spot: #d4af37;
    --spot-hover: #e8c65f;
    --spot-subtle: rgba(212, 175, 55, 0.15);
    --spot-surface: rgba(212, 175, 55, 0.05);
    /* ボタン */
    --btn-primary: #6d1a1a;
    --btn-primary-hover: #8b2323;
    /* ステータスカラー */
    --danger: #991b1b;
    --danger-subtle: rgba(127,29,29,0.5);
    --success: #166534;
    --success-subtle: rgba(20,83,45,0.5);
    --warning: #d4af37;
    --warning-subtle: rgba(113,63,18,0.5);
    --info: #0097a7;
    --info-hover: #00838f;
    /* エラー */
    --error: #f87171;
    --error-ring: rgba(248,113,113,0.2);
    /* カードヘッダー（ソリッド） */
    --card-header-from: #143a22;
    --card-header-via: #143a22;
    --card-header-to: #143a22;
    /* フィードバックテキスト */
    --feedback-correct: #4ade80;
    --feedback-incorrect: #fb7185;
    /* シャドウ */
    --card-shadow: 0 0 15px rgba(212,175,55,0.1);
    --card-shadow-hover: 0 0 20px rgba(212,175,55,0.15);
    --card-glow: 0 20px 50px rgba(0,0,0,0.3);
  }

  [data-theme="dark-roast"] {
    /* ヘッダー */
    --header-bg: #0d0b09;
    --header-text: #f5f0e8;
    --header-accent: #c8a050;
    --header-btn-hover: rgba(200, 160, 80, 0.2);
    /* 背景 */
    --page: #0d0b09;
    --surface: #1a1614;
    --overlay: #15110e;
    --ground: rgba(255, 255, 255, 0.03);
    --field: rgba(255, 255, 255, 0.07);
    /* テキスト */
    --ink: #f5f0e8;
    --ink-sub: #c4b69c;
    --ink-muted: rgba(196, 182, 156, 0.6);
    /* ボーダー */
    --edge: #2a231d;
    --edge-strong: #3d3329;
    --edge-subtle: rgba(255, 255, 255, 0.08);
    /* アクセント */
    --spot: #c8a050;
    --spot-hover: #dab86c;
    --spot-subtle: rgba(200, 160, 80, 0.15);
    --spot-surface: rgba(200, 160, 80, 0.05);
    /* ボタン */
    --btn-primary: #c8a050;
    --btn-primary-hover: #dab86c;
    /* ステータスカラー */
    --danger: #ef4444;
    --danger-subtle: rgba(239, 68, 68, 0.15);
    --success: #22c55e;
    --success-subtle: rgba(34, 197, 94, 0.15);
    --warning: #eab308;
    --warning-subtle: rgba(234, 179, 8, 0.15);
    --info: #06b6d4;
    --info-hover: #22d3ee;
    /* エラー */
    --error: #f87171;
    --error-ring: rgba(248, 113, 113, 0.2);
    /* カードヘッダー */
    --card-header-from: #1a1614;
    --card-header-via: #2a231d;
    --card-header-to: #1a1614;
    /* フィードバックテキスト */
    --feedback-correct: #4ade80;
    --feedback-incorrect: #fb7185;
    /* シャドウ */
    --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    --card-shadow-hover: 0 8px 24px rgba(200, 160, 80, 0.1);
    --card-glow: 0 20px 50px rgba(0, 0, 0, 0.3);
  }

  [data-theme="light-roast"] {
    /* ヘッダー */
    --header-bg: #6b5d4f;
    --header-text: #fff9f0;
    --header-accent: #d4a535;
    --header-btn-hover: rgba(214, 165, 53, 0.2);
    /* 背景 */
    --page: #faf6ef;
    --surface: #fff9f0;
    --overlay: #fff9f0;
    --ground: #f0e9dd;
    --field: #fff9f0;
    /* テキスト */
    --ink: #3d3229;
    --ink-sub: #6b5d4f;
    --ink-muted: #9c8b7a;
    /* ボーダー */
    --edge: #ede5d8;
    --edge-strong: #ddd3c3;
    --edge-subtle: #f5eee3;
    /* アクセント */
    --spot: #c69320;
    --spot-hover: #a87b15;
    --spot-subtle: rgba(214, 165, 53, 0.15);
    --spot-surface: rgba(214, 165, 53, 0.06);
    /* ボタン */
    --btn-primary: #c69320;
    --btn-primary-hover: #a87b15;
    /* ステータスカラー */
    --danger: #dc2626;
    --danger-subtle: #fee2e2;
    --success: #16a34a;
    --success-subtle: #dcfce7;
    --warning: #d4a535;
    --warning-subtle: #fef3c7;
    --info: #0891b2;
    --info-hover: #0e7490;
    /* エラー */
    --error: #ef4444;
    --error-ring: #fee2e2;
    /* カードヘッダー */
    --card-header-from: #3d3229;
    --card-header-via: #6b5d4f;
    --card-header-to: #3d3229;
    /* フィードバックテキスト */
    --feedback-correct: #065f46;
    --feedback-incorrect: #9f1239;
    /* シャドウ */
    --card-shadow: 0 4px 6px -1px rgba(61, 50, 41, 0.08), 0 2px 4px -2px rgba(61, 50, 41, 0.06);
    --card-shadow-hover: 0 10px 15px -3px rgba(61, 50, 41, 0.1), 0 4px 6px -4px rgba(61, 50, 41, 0.08);
    --card-glow: 0 10px 30px rgba(61, 50, 41, 0.04);
  }

  [data-theme="matcha"] {
    /* ヘッダー */
    --header-bg: #0f1f15;
    --header-text: #f0ebe0;
    --header-accent: #7db358;
    --header-btn-hover: rgba(125, 179, 88, 0.2);
    /* 背景 */
    --page: #0f1f15;
    --surface: #1a3025;
    --overlay: #152a1f;
    --ground: rgba(255, 255, 255, 0.03);
    --field: rgba(255, 255, 255, 0.07);
    /* テキスト */
    --ink: #f0ebe0;
    --ink-sub: #b8c5a8;
    --ink-muted: rgba(184, 197, 168, 0.6);
    /* ボーダー */
    --edge: #253d2e;
    --edge-strong: #345a40;
    --edge-subtle: rgba(255, 255, 255, 0.08);
    /* アクセント */
    --spot: #7db358;
    --spot-hover: #95c774;
    --spot-subtle: rgba(125, 179, 88, 0.15);
    --spot-surface: rgba(125, 179, 88, 0.05);
    /* ボタン */
    --btn-primary: #7db358;
    --btn-primary-hover: #95c774;
    /* ステータスカラー */
    --danger: #ef4444;
    --danger-subtle: rgba(239, 68, 68, 0.15);
    --success: #22c55e;
    --success-subtle: rgba(34, 197, 94, 0.15);
    --warning: #eab308;
    --warning-subtle: rgba(234, 179, 8, 0.15);
    --info: #06b6d4;
    --info-hover: #22d3ee;
    /* エラー */
    --error: #f87171;
    --error-ring: rgba(248, 113, 113, 0.2);
    /* カードヘッダー */
    --card-header-from: #1a3025;
    --card-header-via: #253d2e;
    --card-header-to: #1a3025;
    /* フィードバックテキスト */
    --feedback-correct: #4ade80;
    --feedback-incorrect: #fb7185;
    /* シャドウ */
    --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    --card-shadow-hover: 0 8px 24px rgba(125, 179, 88, 0.1);
    --card-glow: 0 20px 50px rgba(0, 0, 0, 0.3);
  }

  [data-theme="caramel"] {
    /* ヘッダー */
    --header-bg: #1a120d;
    --header-text: #f5ebe0;
    --header-accent: #d4923a;
    --header-btn-hover: rgba(212, 146, 58, 0.2);
    /* 背景 */
    --page: #1a120d;
    --surface: #2a1f17;
    --overlay: #231a13;
    --ground: rgba(255, 255, 255, 0.03);
    --field: rgba(255, 255, 255, 0.07);
    /* テキスト */
    --ink: #f5ebe0;
    --ink-sub: #c9b9a5;
    --ink-muted: rgba(201, 185, 165, 0.6);
    /* ボーダー */
    --edge: #3a2d22;
    --edge-strong: #4d3d30;
    --edge-subtle: rgba(255, 255, 255, 0.08);
    /* アクセント */
    --spot: #d4923a;
    --spot-hover: #e5a54d;
    --spot-subtle: rgba(212, 146, 58, 0.15);
    --spot-surface: rgba(212, 146, 58, 0.05);
    /* ボタン */
    --btn-primary: #d4923a;
    --btn-primary-hover: #e5a54d;
    /* ステータスカラー */
    --danger: #ef4444;
    --danger-subtle: rgba(239, 68, 68, 0.15);
    --success: #22c55e;
    --success-subtle: rgba(34, 197, 94, 0.15);
    --warning: #eab308;
    --warning-subtle: rgba(234, 179, 8, 0.15);
    --info: #06b6d4;
    --info-hover: #22d3ee;
    /* エラー */
    --error: #f87171;
    --error-ring: rgba(248, 113, 113, 0.2);
    /* カードヘッダー */
    --card-header-from: #2a1f17;
    --card-header-via: #3a2d22;
    --card-header-to: #2a1f17;
    /* フィードバックテキスト */
    --feedback-correct: #4ade80;
    --feedback-incorrect: #fb7185;
    /* シャドウ */
    --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    --card-shadow-hover: 0 8px 24px rgba(212, 146, 58, 0.1);
    --card-glow: 0 20px 50px rgba(0, 0, 0, 0.3);
  }
}

/* stylelint-disable-next-line at-rule-no-unknown */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--primary);
  --color-primary-dark: var(--primary-dark);
  --color-primary-light: var(--primary-light);
  --color-dark: var(--dark);
  --color-dark-light: var(--dark-light);
  --color-gold: var(--gold);
  /* 背景色トークン（テーマ対応） */
  --color-bg-global: var(--page);
  --color-bg-card: var(--surface);
  --color-bg-section: var(--ground);
  /* セマンティックテーマトークン */
  --color-page: var(--page);
  --color-surface: var(--surface);
  --color-overlay: var(--overlay);
  --color-ground: var(--ground);
  --color-field: var(--field);
  --color-ink: var(--ink);
  --color-ink-sub: var(--ink-sub);
  --color-ink-muted: var(--ink-muted);
  --color-edge: var(--edge);
  --color-edge-strong: var(--edge-strong);
  --color-edge-subtle: var(--edge-subtle);
  --color-spot: var(--spot);
  --color-spot-hover: var(--spot-hover);
  --color-spot-subtle: var(--spot-subtle);
  --color-spot-surface: var(--spot-surface);
  /* ボタン */
  --color-btn-primary: var(--btn-primary);
  --color-btn-primary-hover: var(--btn-primary-hover);
  /* ステータスカラー */
  --color-danger: var(--danger);
  --color-danger-subtle: var(--danger-subtle);
  --color-success: var(--success);
  --color-success-subtle: var(--success-subtle);
  --color-warning: var(--warning);
  --color-warning-subtle: var(--warning-subtle);
  --color-info: var(--info);
  --color-info-hover: var(--info-hover);
  /* カードヘッダー */
  --color-card-header-from: var(--card-header-from);
  --color-card-header-via: var(--card-header-via);
  --color-card-header-to: var(--card-header-to);
  /* ヘッダー */
  --color-header-bg: var(--header-bg);
  --color-header-text: var(--header-text);
  --color-header-accent: var(--header-accent);
  --color-header-btn-hover: var(--header-btn-hover);
  /* フィードバックテキスト */
  --color-feedback-correct: var(--feedback-correct);
  --color-feedback-incorrect: var(--feedback-incorrect);
  /* エラー */
  --color-error: var(--error);
  --color-error-ring: var(--error-ring);
  /* フォント */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --font-nunito: var(--font-nunito);
}

/* stylelint-enable at-rule-no-unknown */

/* テーマ対応カスタムユーティリティ */
@layer utilities {
  .shadow-card { box-shadow: var(--card-shadow); }
  .shadow-card-hover { box-shadow: var(--card-shadow-hover); }
  .shadow-card-glow { box-shadow: var(--card-glow); }
  .tab-active { background-color: var(--surface); color: var(--ink); }
  [data-theme="christmas"] .tab-active { background-color: var(--spot-subtle); color: var(--spot); }
  .select-icon { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236B7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); }
  [data-theme="christmas"] .select-icon { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23d4af37'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); }
  /* ホームアイコン: 通常モードは背景なし+大アイコン、クリスマスモードは背景丸+小アイコン */
  .icon-circle-bg { background-color: transparent; }
  [data-theme="christmas"] .icon-circle-bg { background-color: var(--spot-subtle); width: 3.5rem; height: 3.5rem; }
  [data-theme="christmas"] .icon-circle-bg > svg { width: 2rem !important; height: 2rem !important; }
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--page);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* 絵文字フォントのフォールバック */
.emoji {
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "Android Emoji", "EmojiSymbols", "EmojiOne Mozilla", "Twemoji Mozilla", "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", "EmojiSymbols", "EmojiOne Mozilla", "Twemoji Mozilla", sans-serif;
  font-style: normal;
  font-weight: normal;
  line-height: 1;
  vertical-align: baseline;
  display: inline-block;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* select要素とoption要素のスタイル */
select option {
  color: #1f2937;
  /* text-gray-800 */
  background-color: white;
}

/* New!ラベルのアニメーション */
@keyframes pulse-scale {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.05);
  }
}

@keyframes gradient-shift {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}

.animate-pulse-scale {
  animation: pulse-scale 2s ease-in-out infinite;
}

.new-label-gradient {
  background: linear-gradient(90deg, #dc2626, #ef4444, #f87171, #ef4444, #dc2626);
  background-size: 200% 100%;
  animation: gradient-shift 3s ease infinite;
}

.completed-label-gradient {
  background: linear-gradient(90deg, #B45309, #D97706, #F59E0B, #D97706, #B45309);
  background-size: 200% 100%;
  animation: gradient-shift 3s ease infinite;
}

/* Home: slide + card appear */
@keyframes home-slide-in {
  from {
    opacity: 0;
    transform: translateX(-16px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes home-card-appear {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-home-page {
  animation: home-slide-in 0.55s cubic-bezier(0.25, 0.8, 0.3, 1) both;
  will-change: opacity, transform;
}

.animate-home-card {
  animation: home-card-appear 0.48s ease-out both;
  will-change: opacity, transform;
}

@media (prefers-reduced-motion: reduce) {

  .animate-home-page,
  .animate-home-card {
    animation: none;
  }
}

/* Scrollbar Hiding Utilities */
.scrollbar-hide {
  -ms-overflow-style: none;
  /* IE and Edge */
  scrollbar-width: none;
  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
  /* Chrome, Safari and Opera */
}

/* ヘッダーキャラクター歩行アニメーション */
@keyframes walk-characters {
  0% {
    transform: translateX(-100%);
  }

  100% {
    transform: translateX(100%);
  }
}

@keyframes walk-bounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-2px);
  }
}

.animate-walk-characters {
  animation: walk-characters 12s linear infinite, walk-bounce 0.4s ease-in-out infinite;
}

/* キャラクターゆらゆらアニメーション（歩行風） */
@keyframes wobble-left {

  0%,
  100% {
    transform: rotate(-3deg) translateY(0);
  }

  25% {
    transform: rotate(0deg) translateY(-2px);
  }

  50% {
    transform: rotate(3deg) translateY(0);
  }

  75% {
    transform: rotate(0deg) translateY(-2px);
  }
}

@keyframes wobble-right {

  0%,
  100% {
    transform: rotate(3deg) translateY(-2px);
  }

  25% {
    transform: rotate(0deg) translateY(0);
  }

  50% {
    transform: rotate(-3deg) translateY(-2px);
  }

  75% {
    transform: rotate(0deg) translateY(0);
  }
}

.animate-wobble-left {
  animation: wobble-left 1s ease-in-out infinite;
}

.animate-wobble-right {
  animation: wobble-right 1s ease-in-out infinite;
}