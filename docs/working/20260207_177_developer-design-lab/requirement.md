# 要件定義

**Issue**: #177
**作成日**: 2026-02-07
**更新日**: 2026-02-07
**ラベル**: enhancement

## ユーザーストーリー
ユーザー「新機能のUIデザインを作りたいけど、Figmaは面倒。Claude Codeに自然言語で指示してデザインを作ってもらい、アプリ内で確認・微調整したい」
アプリ「Design Labページで、モック閲覧・比較ができ、フリーキャンバスD&Dビルダーでデザインを調整・保存できる」

## 要件一覧

### パートA: モック閲覧・比較ツール

#### 必須要件
- [ ] 既存の `/ui-test` と `/dev/splash-preview` を統合した単一ページ
- [ ] 開発者モード（`useDeveloperMode`）ON時のみアクセス可能
- [ ] 6セクション構成のスクロールダッシュボード
  1. コンポーネントギャラリー（既存registry.tsx流用）
  2. アニメーション・トランジション（既存splash patterns流用）
  3. ページデザインモック（レジストリ方式）
  4. カラーパレット（CSS変数の可視化、通常/クリスマス両方）
  5. タイポグラフィ（フォント・サイズ・ウェイト一覧）
  6. コンポーネントバリエーション（デザインパターン比較）
- [ ] セクションジャンプナビゲーション（TOC）
- [ ] パターン並列比較（2〜3パターン横並び）
- [ ] レスポンシブプレビュー（スマホ375px / タブレット768px / PC1280px）
- [ ] フルスクリーンプレビュー
- [ ] クリスマスモード切り替え
- [ ] レジストリ方式で管理（登録するだけで自動表示）

### パートB: フリーキャンバスD&Dデザインビルダー

#### 必須要件
- [ ] フリーキャンバス（XY座標自由配置、ズーム、パン）
- [ ] 要素の選択・移動・リサイズ・削除
- [ ] レイヤー管理（z-index制御、前面/背面移動）
- [ ] キャンバスグリッド・スナップ機能
- [ ] 要素パレット
  - 既存UIコンポーネント（Button, Card, Input等21種）
  - 基本HTML要素（テキスト、画像、コンテナ、区切り線等）
- [ ] パレットからキャンバスへのD&D配置
- [ ] プロパティエディタ
  - コンポーネントprops編集（variant, size, label等）
  - スタイル編集（余白、色、フォントサイズ、ボーダー等）
  - アニメーション設定（Framer Motion）
  - イベントハンドラ設定（onClick, onHover等）
- [ ] デザインデータJSON Schema
- [ ] Firestoreプロジェクト単位保存（CRUD）
- [ ] プロジェクト一覧・検索
- [ ] Claude Codeデザインデータ生成用スキル/テンプレート

### パートC: 統合・移行

#### 必須要件
- [ ] 設定ページの開発ツールリンクを更新
- [ ] 旧ページからのリダイレクト
- [ ] Lintエラー・warning ゼロ

## 受け入れ基準

### パートA
- [ ] `/dev/design-lab` にアクセスすると全6セクションが表示される
- [ ] TOCからセクションにスムーズスクロールで移動できる
- [ ] クリスマスモード切り替えが全セクションに反映される
- [ ] レスポンシブプレビューで3サイズの切り替えができる
- [ ] 旧ページからリダイレクトされる

### パートB
- [ ] パレットから要素をD&Dでキャンバスに配置できる
- [ ] キャンバス上で要素を自由に移動・リサイズできる
- [ ] プロパティエディタで選択要素のprops・スタイルを編集できる
- [ ] デザインをFirestoreにプロジェクト単位で保存・読み込みできる
- [ ] Claude Codeが生成したJSONをインポートしてキャンバスに表示できる
- [ ] 既存UIコンポーネント（Button等）がキャンバス上で実際にレンダリングされる

### パートC
- [ ] 開発者モードOFF時はDesign Labにアクセスできない
- [ ] Lintエラー・warningゼロ
- [ ] ビルド成功
